<!DOCTYPE html>
<html>
  <head>
    <title>Panel Dyspozytora - TransportApp</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
    <%= stylesheet_link_tag :app, "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>
  </head>
  <body>
    <div class="d-flex">

      <!-- Sidebar -->
      <nav class="bg-dark text-white vh-100 p-3" style="width: 250px;">
        <!-- Link do strony głównej -->
        <div class="mb-4 text-center">
          <%= link_to root_path, class: "text-white text-decoration-none d-inline-block mb-3" do %>
            <i class="bi bi-house-door-fill fs-3"></i>
          <% end %>
          <div class="text-muted small">Powrót do aplikacji</div>
        </div>

        <!-- Logo panelu admina -->
        <div class="mb-4">
          <a href="<%= dispatcher_root_path %>" class="text-white text-decoration-none">
            <h4 class="m-0">Dispo</h4>
            <small class="text-light opacity-75">TransportApp</small>
          </a>
        </div>

        <ul class="nav flex-column">
          <li class="nav-item mb-2">
            <%= link_to dispatcher_root_path, class: "nav-link text-white #{'fw-bold' if current_page?(dispatcher_root_path)}" do %>
              <i class="bi bi-speedometer2 me-2"></i> Dashboard
            <% end %>
          </li>

          <li class="nav-item mb-2">
            <%= link_to dispatcher_orders_path, class: "nav-link text-white #{'fw-bold' if current_page?(dispatcher_orders_path)}" do %>
              <i class="bi bi-box-seam me-2"></i> Zamówienia
            <% end %>
          </li>

          <li class="nav-item mb-2">
            <%= link_to dispatcher_drivers_path, class: "nav-link text-white #{'fw-bold' if current_page?(dispatcher_drivers_path)}" do %>
              <i class="bi bi-box-seam me-2"></i> Kierowcy
            <% end %>
          </li>

          <li class="nav-item mb-2">
            <%= link_to dispatcher_calendar_path, class: "nav-link text-white #{'fw-bold' if current_page?(dispatcher_calendar_path)}" do %>
              <i class="bi bi-calendar-event me-2"></i> Kalendarz
            <% end %>
          </li>

          <li class="nav-item mb-2">
            <%= link_to dispatcher_notifications_path, class: "nav-link text-white #{'fw-bold' if current_page?(dispatcher_notifications_path)}" do %>
              <i class="bi bi-bell-fill me-2"></i> Powiadomienia
            <% end %>
          </li>

          <li class="mt-4">
            <%= link_to destroy_user_session_path,
                        data: { turbo_method: :delete },
                        class: "btn btn-outline-light w-100" do %>
              <i class="bi bi-box-arrow-right me-2"></i> Wyloguj
            <% end %>
          </li>
        </ul>
      </nav>

      <!-- Content -->
      <main class="flex-grow-1 p-4">

        <!-- Flash messages -->
        <% flash.each do |type, message| %>
          <% bootstrap_class = case type
               when "notice" then "alert-success"
               when "alert" then "alert-danger"
               else "alert-info"
             end %>
          <div class="alert <%= bootstrap_class %> alert-dismissible fade show" role="alert">
            <%= message %>
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
          </div>
        <% end %>

        <%= yield %>
      </main>
    </div>
  </body>
</html>
