<div class="container py-5">
  <div class="row justify-content-center">
    <div class="col-md-10">
      <h3 class="mb-4 fw-bold text-start">Podsumowanie zamówienia</h3>

      <div class="card shadow-lg rounded-4 border-0">
        <div class="card-body p-5">

          <!-- Order details -->
        <div class="card shadow-sm border-0 rounded-3 mb-4">
  <div class="card-body bg-light">
    <div class="row">
      <div class="col-md-6 mb-3">
        <p><strong>Numer zamówienia:</strong> <%= @order.order_number %></p>
        <p><strong>Status:</strong> 
          <span class="badge bg-warning"><%= @order.status_name %></span>
        </p>
        <p><strong>Adres odbioru:</strong> <%= @order.pickup_address %></p>
        <p><strong>Adres dostawy:</strong> <%= @order.delivery_address %></p>
        <p><strong>Pojazd:</strong> <%= @order.vehicle_type&.name %></p>
        <p><strong>Usługa:</strong> <%= @order.service_type&.name %></p>
      </div>

      <div class="col-md-6 mb-3">
        <p><strong>Dystans:</strong> <%= number_with_precision(@order.distance_km, precision: 2) %> km</p>
        <p><strong>Czas podróży:</strong> <%= @order.travel_time.round(2) if @order.travel_time %> h</p>
        <p><strong>Przewidywana dostawa:</strong> <%= l(@order.delivery_date, format: :long) if @order.delivery_date %></p>
        <p><strong>Cena:</strong> 
          <span class="fw-bold text-success"><%= number_to_currency(@order.price, unit: "PLN") %></span>
        </p>
      </div>
    </div>
  </div>
</div>


          <!-- Map -->
          <div
            id="map"
            data-controller="order-map"
            data-order-map-pickup-lat-value="<%= @order.pickup_lat || 52.2297 %>"
            data-order-map-pickup-lon-value="<%= @order.pickup_lon || 21.0122 %>"
            <% if @order.delivery_lat && @order.delivery_lon %>
              data-order-map-delivery-lat-value="<%= @order.delivery_lat %>"
              data-order-map-delivery-lon-value="<%= @order.delivery_lon %>"
            <% end %>
            data-order-map-ors-api-key-value="<%= @ors_api_key %>"
            style="height: 400px; border-radius: 12px;"
            class="mb-4"
          ></div>

          <!-- Leaflet CSS/JS -->
          <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
          <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
     
        </div>
      </div>
    </div>
  </div>
</div>
